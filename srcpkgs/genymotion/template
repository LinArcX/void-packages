# Template file for 'genymotion'
pkgname=genymotion
version=3.0.4
revision=1
archs="x86_64"
_full_name="${pkgname}-${version}-linux_x64.bin"
create_wrksrc=yes
build_style=fetch
hostmakedepends="tar which"
depends="libpng net-tools protobuf qca-qt5 qt5-script qt5-webkit virtualbox-ose"
short_desc="Complete set of tools that provides a virtual environment for Android"
maintainer="linarcx <linarcx@riseup.net>"
license="custom:Proprietary"
homepage="http://www.genymotion.com"
distfiles="https://dl.genymotion.com/releases/${pkgname}-${version}/${_full_name}"
checksum=71e45d27e94c2e0787238963ca2c76c93f9a3cf529a2883de5ce0fbb16e0c5e4
repository=nonfree
nopie=yes

do_install() {
	vmkdir opt
	vmkdir usr/bin
	vmkdir usr/share/applications
	yes | bash ${_full_name} -d $DESTDIR/opt
	ln -s /opt/genymotion/gmtool $DESTDIR/usr/bin/gmtool
	ln -s /opt/genymotion/genymotion $DESTDIR/usr/bin/genymotion
	ln -s /opt/genymotion/player $DESTDIR/usr/bin/genymotion-player
	ln -s /opt/genymotion/genymotion-shell $DESTDIR/usr/bin/genymotion-shell
	vinstall ${FILESDIR}/genymotion.desktop 644 usr/share/applications
}
